<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ car.marka }} {{ car.model }} | Giełda Radom AI</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@5.4.3/dist/photoswipe.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">

    <style>
        :root { 
            --radom-red: #ce2b37; 
            --dark-bg: #0b0c0d;
            --card-bg: #16181a;
            --ai-grad: linear-gradient(135deg, #4285f4 0%, #9b72f3 100%);
        }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: var(--dark-bg); color: #e9ecef; }

        /* HERO - SZTOS */
        .hero-banner {
            position: relative;
            height: 450px;
            background: linear-gradient(0deg, var(--dark-bg) 0%, rgba(0,0,0,0.4) 100%), url('/static/czerwiec_tlo.jpg');
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .city-tag {
            font-size: 5rem;
            font-weight: 900;
            text-transform: uppercase;
            opacity: 0.1;
            position: absolute;
            bottom: -20px;
            right: 20px;
            letter-spacing: 10px;
            pointer-events: none;
        }

        /* GALERIA & ZOOM */
        .gallery-wrapper { position: relative; border-radius: 30px; overflow: hidden; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); }
        .main-img { width: 100%; height: 580px; object-fit: cover; cursor: zoom-in; transition: 0.4s; }
        .main-img:hover { filter: brightness(1.1); }
        
        .thumb-strip { display: flex; gap: 12px; padding: 15px 0; overflow-x: auto; scrollbar-width: none; }
        .thumb-card { width: 110px; height: 75px; border-radius: 12px; object-fit: cover; cursor: pointer; opacity: 0.4; border: 2px solid transparent; transition: 0.3s; }
        .thumb-card.active { opacity: 1; border-color: var(--radom-red); transform: scale(1.05); }

        /* PARAMETRY */
        .spec-box { background: var(--card-bg); border: 1px solid rgba(255,255,255,0.05); border-radius: 20px; padding: 20px; transition: 0.3s; }
        .spec-box:hover { border-color: var(--radom-red); transform: translateY(-5px); }
        .spec-label { color: #6c757d; font-size: 0.7rem; text-transform: uppercase; font-weight: 700; }
        .spec-value { display: block; font-size: 1.15rem; font-weight: 800; color: #fff; }

        /* PARTNERZY & AI */
        .partner-card { border-radius: 20px; padding: 20px; margin-bottom: 15px; border: 1px solid rgba(255,255,255,0.1); }
        .cv-style { border-left: 5px solid #1d4ed8; background: rgba(29, 78, 216, 0.05); }
        .mubi-style { border-left: 5px solid #22c55e; background: rgba(34, 197, 94, 0.05); }
        .ai-gradient-box { background: var(--ai-grad); border-radius: 20px; padding: 25px; color: white; }

        /* FLOATING ACTION */
        .price-sticky { background: white; color: black; border-radius: 25px; padding: 30px; position: sticky; top: 100px; box-shadow: 0 20px 40px rgba(0,0,0,0.3); }
        .btn-fav { width: 50px; height: 50px; border-radius: 15px; border: 1px solid #ddd; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; transition: 0.3s; }
        .btn-fav:hover { color: var(--radom-red); border-color: var(--radom-red); }

        footer { background: #000; padding: 80px 0 40px; border-top: 1px solid #111; }
    </style>
</head>
<body>

    <section class="hero-banner">
        <div class="container">
            <div class="row align-items-center position-relative">
                <div class="col-lg-8">
                    <span class="badge bg-danger mb-3 px-4 py-2 rounded-pill shadow">ZWERYFIKOWANE AI</span>
                    <h1 class="display-2 fw-800 mb-1 text-white">{{ car.marka }} {{ car.model }}</h1>
                    <p class="fs-4 text-white-50"><i class="bi bi-geo-alt-fill text-danger"></i> Radom | <span class="text-white">{{ car.zrodlo }}</span></p>
                </div>
                <div class="city-tag">RADOM</div>
            </div>
        </div>
    </section>

    <main class="container py-5">
        <div class="row g-5">
            <div class="col-lg-8">
                <div class="gallery-wrapper pswp-gallery" id="car-gallery">
                    <a href="{{ car.img }}" data-pswp-width="1920" data-pswp-height="1080">
                        <img src="{{ car.img }}" id="mainStage" class="main-img" alt="Główne">
                    </a>
                    <div class="thumb-strip">
                        <img src="{{ car.img }}" class="thumb-card active" onclick="updateView('{{ car.img }}', this)">
                        {% for img in car.images %}
                        <a href="{{ img.image_path }}" data-pswp-width="1920" data-pswp-height="1080" class="d-none"></a>
                        <img src="{{ img.image_path }}" class="thumb-card" onclick="updateView('{{ img.image_path }}', this)">
                        {% endfor %}
                    </div>
                </div>

                <div class="ai-gradient-box my-5 shadow-lg">
                    <div class="row align-items-center">
                        <div class="col-md-2 text-center text-md-start mb-3 mb-md-0">
                            <i class="bi bi-stars" style="font-size: 3.5rem;"></i>
                        </div>
                        <div class="col-md-10">
                            <h4 class="fw-bold mb-2">Analiza Rynkowa Gemini AI</h4>
                            <p class="mb-0 opacity-90 fs-5">
                                Ten egzemplarz jest wyceniony o <strong>2 450 PLN poniżej średniej</strong> dla Mazowsza. 
                                Wysoka płynność modelu {{ car.model }} sugeruje sprzedaż w ciągu 72 godzin.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="description-section">
                    <h3 class="fw-bold mb-4 border-bottom pb-3">Szczegółowe informacje</h3>
                    <p class="fs-5 text-secondary" style="line-height: 1.9; white-space: pre-line;">{{ car.opis }}</p>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="price-sticky">
                    <div class="d-flex justify-content-between align-items-start mb-4">
                        <div>
                            <span class="text-muted small fw-bold">CENA OKAZYJNA</span>
                            <div class="h1 fw-900 text-danger mb-0">{{ "{:,.0f}".format(car.cena).replace(',', ' ') }} <small class="fs-6">PLN</small></div>
                        </div>
                        <button class="btn-fav" onclick="this.style.color='red'"><i class="bi bi-heart-fill"></i></button>
                    </div>

                    <div class="row g-2 mb-4">
                        <div class="col-6"><div class="spec-box text-center"><span class="spec-label">Przebieg</span><span class="spec-value">{{ car.przebieg }} km</span></div></div>
                        <div class="col-6"><div class="spec-box text-center"><span class="spec-label">Skrzynia</span><span class="spec-value">{{ car.skrzynia }}</span></div></div>
                        <div class="col-6"><div class="spec-box text-center"><span class="spec-label">Nadwozie</span><span class="spec-value">{{ car.nadwozie if car.nadwozie else 'Sedan' }}</span></div></div>
                        <div class="col-6"><div class="spec-box text-center"><span class="spec-label">Paliwo</span><span class="spec-value">{{ car.paliwo }}</span></div></div>
                    </div>

                    <div class="partner-card cv-style">
                        <div class="d-flex align-items-center gap-3">
                            <i class="bi bi-shield-shaded text-primary fs-3"></i>
                            <div>
                                <h6 class="mb-0 fw-bold">carVertical® Report</h6>
                                <p class="small text-muted mb-0">Historia bezszkodowa potwierdzona.</p>
                            </div>
                        </div>
                    </div>

                    <div class="partner-card mubi-style">
                        <div class="d-flex align-items-center gap-3">
                            <i class="bi bi-lightning-fill text-success fs-3"></i>
                            <div>
                                <h6 class="mb-0 fw-bold">Mubi Ubezpieczenia</h6>
                                <p class="small text-muted mb-0">Zniżka -150zł dla aut z Radomia.</p>
                            </div>
                        </div>
                    </div>

                    <a href="tel:{{ car.telefon }}" class="btn btn-danger w-100 py-3 fw-900 rounded-pill mt-3 shadow-lg">
                        <i class="bi bi-telephone-fill me-2"></i> {{ car.telefon }}
                    </a>
                    
                    <div class="text-center mt-3">
                        <small class="text-muted"><i class="bi bi-eye"></i> {{ car.wyswietlenia }} odsłon ogłoszenia</small>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container text-center">
            <h2 class="fw-900 text-white mb-4">Giełda Radom <span class="text-danger">AI</span></h2>
            <div class="row text-start mt-5">
                <div class="col-md-4"><h6>O portalu</h6><p class="small text-muted">Lider lokalnego rynku motoryzacyjnego w Radomiu. Codziennie setki nowych ofert.</p></div>
                <div class="col-md-4"><h6>Kontakt</h6><p class="small text-muted">biuro@gieldaradom.ai<br>ul. Żeromskiego, Radom</p></div>
                <div class="col-md-4"><h6>Dla sprzedawców</h6><p class="small text-muted">Wystaw auto z pomocą AI i sprzedaj 2x szybciej niż na portalach ogólnopolskich.</p></div>
            </div>
            <hr class="my-5 opacity-10">
            <p class="small text-muted mb-0">© 2026 Giełda Radom AI. Created for the best car enthusiasts.</p>
        </div>
    </footer>

    <script type="module">
        import PhotoSwipeLightbox from 'https://cdn.jsdelivr.net/npm/photoswipe@5.4.3/dist/photoswipe-lightbox.esm.js';
        const lightbox = new PhotoSwipeLightbox({
            gallery: '#car-gallery',
            children: 'a',
            pswpModule: () => import('https://cdn.jsdelivr.net/npm/photoswipe@5.4.3/dist/photoswipe.esm.js')
        });
        lightbox.init();
    </script>

    <script>
        function updateView(src, el) {
            document.getElementById('mainStage').src = src;
            document.getElementById('mainStage').parentElement.href = src;
            document.querySelectorAll('.thumb-card').forEach(t => t.classList.remove('active'));
            el.classList.add('active');
        }
    </script>
</body>
</html>
