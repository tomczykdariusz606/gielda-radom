<!DOCTYPE html>
<html lang="{{ lang }}" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GieÅ‚da Radom - AI & Auta</title>
    
    <meta name="description" content="GieÅ‚da Radom - Najlepsze ogÅ‚oszenia motoryzacyjne. Auta uÅ¼ywane, motocykle, czÄ™Å›ci. Weryfikacja ofert przez Gemini AI 3.0. Bezpieczne kupowanie lokalnie.">
    <meta name="keywords" content="radom gieÅ‚da, auta radom, sprzedam opla radom, motocykle, gemini ai, samochody uÅ¼ywane">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="GieÅ‚da Radom - ZnajdÅº Auto z AI">
    <meta property="og:description" content="Sprawdzone oferty. Skaner AI. Lokalny rynek.">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <style>
        :root { --radom-red: #ce2b37; --bg-dark: #0f0f0f; }
        body { 
            background-color: var(--bg-dark); 
            color: #eee; font-family: 'Segoe UI', sans-serif; padding-bottom: 60px;
            background-image: url("{{ url_for('static', filename='czerwiec_tlo.jpg') }}");
            background-size: cover; background-position: center; background-attachment: fixed;
        }
        
        .navbar { background: rgba(0,0,0,0.9); border-bottom: 2px solid var(--radom-red); position: sticky; top: 0; z-index: 1000; box-shadow: 0 5px 20px rgba(0,0,0,0.5); }
        .hero-wrap { padding: 80px 0; text-align: center; position: relative; }
        
        .search-pill-container {
            background: white; border-radius: 50px; padding: 5px;
            display: flex; align-items: center; max-width: 700px; margin: 0 auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
        }
        .search-input { border: none; background: transparent; height: 55px; width: 100%; padding-left: 20px; font-size: 1.1rem; color: #333; outline: none; }
        
        .btn-filters-icon { border: none; background: #f0f0f0; color: #555; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 5px; cursor: pointer; transition: 0.2s; }
        .btn-filters-icon:hover { background: #e0e0e0; color: var(--radom-red); }
        
        .btn-search-pill { background: var(--radom-red); color: white; border: none; padding: 0 40px; height: 50px; border-radius: 40px; font-weight: bold; font-size: 1.1rem; transition: 0.2s; }
        .btn-search-pill:hover { background: #b01b25; transform: scale(1.02); }
        
        .advanced-filters { margin-top: 15px; background: rgba(0,0,0,0.85); border-radius: 15px; padding: 20px; max-width: 700px; margin-left: auto; margin-right: auto; text-align: left; border: 1px solid #333; backdrop-filter: blur(10px); }
        .form-select-dark, .form-control-dark { background: #333; border: 1px solid #555; color: white; }
        
        .car-card { background: rgba(20, 20, 20, 0.95); border: 1px solid #333; border-radius: 16px; overflow: hidden; transition: 0.3s; position: relative; }
        .car-card:hover { transform: translateY(-7px); border-color: var(--radom-red); }
        
        .lang-btn { text-decoration: none; font-size: 1.2rem; margin-left: 5px; opacity: 0.7; }
        .lang-btn:hover { opacity: 1; transform: scale(1.2); }
        
        #cookieConsent { position: fixed; bottom: 0; left: 0; right: 0; background: rgba(10, 10, 10, 0.95); border-top: 2px solid var(--radom-red); padding: 20px; z-index: 9999; display: none; }
        .seo-footer { background: #050505; color: #777; padding: 50px 0; border-top: 1px solid #333; margin-top: 50px; font-size: 0.9rem; }
        .seo-footer a { color: #999; text-decoration: none; } .seo-footer a:hover { color: var(--radom-red); }
    </style>
</head>
<body>

<nav class="navbar navbar-dark py-3">
    <div class="container d-flex justify-content-between align-items-center">
        <a class="navbar-brand fw-bold fs-4" href="/"><i class="bi bi-speedometer2 text-danger"></i> GieÅ‚da Radom</a>
        <div class="d-flex gap-2 align-items-center">
            
            <div class="me-3">
                <a href="/set_lang/pl" class="lang-btn">ðŸ‡µðŸ‡±</a>
                <a href="/set_lang/en" class="lang-btn">ðŸ‡¬ðŸ‡§</a>
                <a href="/set_lang/de" class="lang-btn">ðŸ‡©ðŸ‡ª</a>
            </div>

            {% if current_user.is_authenticated %}
                <a href="/profil" class="btn btn-outline-light rounded-pill btn-sm fw-bold">{{ t['account'] }}</a>
                <a href="/profil" class="btn btn-danger rounded-pill btn-sm fw-bold px-4 shadow">+ {{ t['add'] }}</a>
            {% else %}
                <a href="/login" class="btn btn-outline-light rounded-pill btn-sm">{{ t['login'] }}</a>
            {% endif %}
        </div>
    </div>
</nav>

<div class="hero-wrap">
    <div class="container">
        <div class="d-inline-block bg-white bg-opacity-10 border border-white border-opacity-25 rounded-pill px-3 py-1 mb-3 text-white small text-uppercase fw-bold">
            <i class="bi bi-stars text-warning me-1"></i> Gemini 3.0 AI
        </div>
        <h1 class="fw-bold text-white mb-2 display-5">{{ t['hero_h1'] }}</h1>
        <p class="text-white-50 mb-4">{{ t['hero_p'] }}</p>

        <form action="/" method="get">
            <div class="search-pill-container">
                <i class="bi bi-search text-muted ms-3 fs-5"></i>
                <input type="text" name="q" class="search-input" placeholder="{{ t['search_ph'] }}" value="{{ request.args.get('q', '') }}">
                <button type="button" class="btn-filters-icon" data-bs-toggle="collapse" data-bs-target="#advFilters" title="{{ t['filters'] }}"><i class="bi bi-sliders2"></i></button>
                <button class="btn-search-pill">{{ t['btn_search'] }}</button>
            </div>

            <div class="collapse" id="advFilters">
                <div class="advanced-filters row g-3">
                    <div class="col-6 col-md-3">
                        <label class="small text-muted mb-1">{{ t['cat'] }}</label>
                        <select name="typ" class="form-select form-select-dark btn-sm">
                            <option value="">{{ t['all'] }}</option><option value="Osobowe">Osobowe</option><option value="SUV">SUV</option><option value="Ciezarowe">Dostawcze</option><option value="Rower">Rowery</option><option value="Inne">Inne</option>
                        </select>
                    </div>
                    <div class="col-6 col-md-3">
                        <label class="small text-muted mb-1">{{ t['gear'] }}</label>
                        <select name="skrzynia" class="form-select form-select-dark btn-sm">
                            <option value="">{{ t['all'] }}</option><option value="Manualna">{{ t['man'] }}</option><option value="Automatyczna">{{ t['auto'] }}</option>
                        </select>
                    </div>
                    <div class="col-6 col-md-3">
                        <label class="small text-muted mb-1">{{ t['mileage'] }}</label>
                        <input type="number" name="max_przebieg" class="form-control form-control-dark btn-sm" placeholder="km">
                    </div>
                    <div class="col-6 col-md-3">
                        <label class="small text-muted mb-1">{{ t['price'] }}</label>
                        <input type="number" name="max_cena" class="form-control form-control-dark btn-sm" placeholder="PLN">
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4 pb-2 border-bottom border-secondary bg-black bg-opacity-50 p-3 rounded">
        <h4 class="fw-bold text-white mb-0">{{ t['available'] }}</h4>
        <span class="text-muted small">{{ t['found'] }}: {{ cars|length }}</span>
    </div>

    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
        {% for car in cars %}
        <div class="col">
            <div class="card car-card h-100">
                {% if current_user.is_authenticated %}
                <a href="/toggle_favorite/{{ car.id }}" class="btn btn-sm btn-dark bg-opacity-50 text-white rounded-circle position-absolute top-0 end-0 m-2 border-0" style="width: 35px; height: 35px; z-index: 10; display: flex; align-items: center; justify-content: center;"><i class="bi {% if car in current_user.favorites|map(attribute='car') %}bi-heart-fill text-danger{% else %}bi-heart{% endif %}"></i></a>
                {% endif %}
                <a href="/ogloszenie/{{ car.id }}" class="text-decoration-none">
                    <div class="position-relative">
                        <img src="{{ car.img }}" class="card-img-top" style="height: 230px; object-fit: cover;">
                        {% if car.is_promoted %}<span class="position-absolute top-0 start-0 m-2 badge bg-warning text-dark border border-white fw-bold shadow">GOLD</span>{% endif %}
                        <div class="position-absolute bottom-0 start-0 w-100 p-2" style="background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);">
                            <h5 class="fw-bold text-white mb-0 text-truncate px-1">{{ car.marka }} {{ car.model }}</h5>
                            <div class="d-flex justify-content-between align-items-center px-1"><span class="text-white-50 small">{{ car.rok }}r.</span><span class="text-danger fw-bold">{{ "{:,.0f}".format(car.cena).replace(',', ' ') }} PLN</span></div>
                        </div>
                    </div>
                </a>
                <div class="card-body pt-3 pb-3">
                    <div class="d-flex gap-2 small text-muted mb-2">
                        {% if car.typ=='Rower' or car.typ=='Inne' %}<span>{{ car.typ }}</span>
                        {% else %}<span>{{ car.paliwo }}</span><span>{{ car.przebieg }} km</span><span>{{ car.skrzynia }}</span>{% endif %}
                    </div>
                    {% if car.ai_label %}{% set ai = car.ai_label|from_json %}{% if ai %}
                    <div class="bg-black bg-opacity-25 p-2 rounded border border-secondary border-opacity-25">
                        <div class="d-flex justify-content-between align-items-center small mb-1"><span class="text-{{ ai.color }} fw-bold text-uppercase" style="font-size: 0.7rem;"><i class="bi bi-stars"></i> {{ ai.label }}</span><span class="text-muted" style="font-size: 0.7rem;">{{ ai.score }}/100</span></div>
                        <div class="progress" style="height: 3px; background: #333;"><div class="progress-bar bg-{{ ai.color }}" style="width: {{ ai.score }}%"></div></div>
                    </div>
                    {% endif %}{% endif %}
                </div>
            </div>
        </div>
        {% else %}
        <div class="col-12 text-center py-5 bg-black bg-opacity-50 rounded border border-secondary"><h4 class="mt-3 text-muted">Brak wynikÃ³w.</h4></div>
        {% endfor %}
    </div>
</div>

<div id="cookieConsent"><div class="container d-flex flex-column flex-md-row justify-content-between align-items-center gap-3"><div class="text-white small"><i class="bi bi-cookie me-2 text-danger"></i>Cookies & AI. <a href="/polityka" class="text-secondary text-decoration-underline">Polityka</a>.</div><button class="btn btn-danger rounded-pill px-4 fw-bold shadow btn-sm" onclick="acceptCookies()">OK</button></div></div>

<footer class="seo-footer"><div class="container"><div class="row"><div class="col-md-4 mb-4"><h5 class="text-white">GieÅ‚da Radom</h5><p>Lokalny lider. Weryfikacja <strong>Gemini AI</strong>.</p></div><div class="col-md-4 mb-4"><h5 class="text-white">Linki</h5><ul class="list-unstyled lh-lg"><li><a href="/?typ=Osobowe">Samochody</a></li><li><a href="/?typ=Ciezarowe">Dostawcze</a></li><li><a href="/?typ=Rower">Rowery</a></li></ul></div><div class="col-md-4 mb-4"><h5 class="text-white">Pomoc</h5><ul class="list-unstyled lh-lg"><li><a href="/regulamin">Regulamin</a></li><li><a href="/polityka">Polityka</a></li><li><a href="/kontakt">Kontakt</a></li><li><a href="/sitemap.xml">Sitemap</a></li></ul></div></div><div class="text-center pt-4 border-top border-secondary mt-2 small text-muted">Â© 2026 GieÅ‚da Radom.</div></div></footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function acceptCookies() { localStorage.setItem('cookiesAccepted', 'true'); document.getElementById('cookieConsent').style.display = 'none'; }
    if (!localStorage.getItem('cookiesAccepted')) { document.getElementById('cookieConsent').style.display = 'block'; }
</script>
</body>
</html>
